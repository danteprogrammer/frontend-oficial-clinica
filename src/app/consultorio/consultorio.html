<div class="consultorios-container">
  <div class="page-header">
    <h1>üè• Gesti√≥n de Consultorios</h1>
    <p class="subtitle">Vista general de todos los consultorios disponibles en la cl√≠nica</p>
    <div class="header-stats">
      <span class="stat-badge total">Total: {{ consultorios.length }}</span>
      <span class="stat-badge disponible">Disponibles: {{ getCountByEstado('Disponible') }}</span>
      <span class="stat-badge ocupado">Ocupados: {{ getCountByEstado('Ocupado') }}</span>
    </div>
  </div>

  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Cargando consultorios...</p>
  </div>

  <div *ngIf="error" class="error-container">
    <div class="error-message">
      <strong>‚ö†Ô∏è Error:</strong> {{ error }}
    </div>
    <button (click)="ngOnInit()" class="btn-retry">üîÑ Reintentar</button>
  </div>

  <div *ngIf="!loading && !error" class="consultorios-content">
    <!-- Filtros por estado -->
    <div class="filtros-container">
      <button
        class="filtro-btn active"
        (click)="filtroEstado = 'Todos'"
        [class.active]="filtroEstado === 'Todos'">
        Todos ({{ consultorios.length }})
      </button>
      <button
        class="filtro-btn"
        (click)="filtroEstado = 'Disponible'"
        [class.active]="filtroEstado === 'Disponible'">
        ‚úÖ Disponibles ({{ getCountByEstado('Disponible') }})
      </button>
      <button
        class="filtro-btn"
        (click)="filtroEstado = 'Ocupado'"
        [class.active]="filtroEstado === 'Ocupado'">
        ‚ùå Ocupados ({{ getCountByEstado('Ocupado') }})
      </button>
      <button
        class="filtro-btn"
        (click)="filtroEstado = 'Mantenimiento'"
        [class.active]="filtroEstado === 'Mantenimiento'">
        üîß Mantenimiento ({{ getCountByEstado('Mantenimiento') }})
      </button>
    </div>

    <!-- Grid de consultorios -->
    <div class="consultorios-grid">
      <div
        *ngFor="let consultorio of consultoriosFiltrados"
        class="consultorio-card"
        [ngClass]="getEstadoClass(consultorio.estado)">
        <div class="consultorio-header">
          <div class="consultorio-numero">
            <span class="numero">{{ consultorio.numero }}</span>
            <span class="estado-icon">
              {{ getEstadoIcon(consultorio.estado) }}
            </span>
          </div>
          <div class="consultorio-piso">
            üè¢ Piso {{ consultorio.piso }}
          </div>
        </div>

        <div class="consultorio-body">
          <h3 class="consultorio-descripcion">{{ consultorio.descripcion }}</h3>

          <div class="consultorio-estado">
            <span class="estado-label">
              {{ consultorio.estado }}
            </span>
          </div>

          <!-- Informaci√≥n adicional -->
          <div class="consultorio-detalles">
            <div class="detalle-item">
              <strong>üìç Ubicaci√≥n:</strong> Piso {{ consultorio.piso }}, Consultorio {{ consultorio.numero }}
            </div>
            <div class="detalle-item">
              <strong>üÜî ID:</strong> {{ consultorio.idConsultorio }}
            </div>
            <div class="detalle-item" *ngIf="consultorio.estado === 'Ocupado'">
              <strong>‚è∞ Estado:</strong> Actualmente en uso
            </div>
            <div class="detalle-item" *ngIf="consultorio.estado === 'Disponible'">
              <strong>‚úÖ Estado:</strong> Disponible para asignaci√≥n
            </div>
          </div>
        </div>

        <div class="consultorio-footer">
          <button class="btn-ver-detalles">
            üìã Ver Detalles Completos
          </button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && !error && consultoriosFiltrados.length === 0" class="no-data">
    <div class="no-data-icon">üè•</div>
    <h3>No hay consultorios {{ filtroEstado === 'Todos' ? 'disponibles' : filtroEstado.toLowerCase() }}</h3>
    <p>No se encontraron consultorios con el filtro seleccionado.</p>
    <button (click)="filtroEstado = 'Todos'" class="btn-reset-filtro">Mostrar Todos</button>
  </div>
</div>
